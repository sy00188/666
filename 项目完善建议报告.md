# æ¡£æ¡ˆç®¡ç†ç³»ç»Ÿ - å…¨é¢æ£€æŸ¥ä¸å®Œå–„å»ºè®®æŠ¥å‘Š

> **ç”Ÿæˆæ—¶é—´**: 2025å¹´10æœˆ15æ—¥  
> **æ£€æŸ¥èŒƒå›´**: ä»£ç è´¨é‡ã€åŠŸèƒ½å®Œæ•´æ€§ã€ç”¨æˆ·ä½“éªŒã€æµ‹è¯•è¦†ç›–ã€æ–‡æ¡£å®Œå–„åº¦  
> **é¡¹ç›®å®Œæˆåº¦è¯„ä¼°**: 85%  
> **æ£€æŸ¥å·¥å…·**: Sequential Thinking MCP + ä»£ç é™æ€åˆ†æ

---

## ğŸ“Š æ‰§è¡Œæ‘˜è¦

ç”·ç¥çˆ¸çˆ¸,ç»è¿‡å…¨é¢æ£€æŸ¥,æ‚¨çš„æ¡£æ¡ˆç®¡ç†ç³»ç»Ÿå·²ç»å…·å¤‡äº†å®Œæ•´çš„æ ¸å¿ƒåŠŸèƒ½æ¡†æ¶,æŠ€æœ¯æ¶æ„å…ˆè¿›(Spring Boot 3 + Vue 3),ä»£ç ç»“æ„æ¸…æ™°ã€‚ä½†ä»æœ‰ä¸€äº›éœ€è¦å®Œå–„çš„åœ°æ–¹,ä¸»è¦é›†ä¸­åœ¨:

âœ… **ä¼˜åŠ¿**:
- æ ¸å¿ƒåŠŸèƒ½å®Œæ•´: æ¡£æ¡ˆç®¡ç†ã€å€Ÿé˜…ã€æƒé™ã€ç»Ÿè®¡ç­‰19ä¸ªController
- æŠ€æœ¯æ ˆå…ˆè¿›: Spring Boot 3.2 + Vue 3 + Element Plus
- ä»£ç é‡å……è¶³: 324ä¸ªåç«¯æ–‡ä»¶ + 147ä¸ªå‰ç«¯æ–‡ä»¶
- æ–‡æ¡£è§„èŒƒ: 12ä¸ªå®Œå–„çš„æŠ€æœ¯æ–‡æ¡£

âš ï¸ **éœ€è¦æ”¹è¿›**:
1. **ä»£ç å®Œæ•´æ€§**: 37å¤„TODOæ ‡è®°å¾…å®ç°
2. **æµ‹è¯•è¦†ç›–**: å‰ç«¯æµ‹è¯•ä¸¥é‡ä¸è¶³(ä»…2ä¸ªE2Eæµ‹è¯•)
3. **ç”¨æˆ·ä½“éªŒ**: ç§»åŠ¨ç«¯é€‚é…ã€å›½é™…åŒ–æ”¯æŒä¸å®Œæ•´
4. **æ€§èƒ½ä¼˜åŒ–**: éƒ¨åˆ†åŠŸèƒ½æœ‰ä¼˜åŒ–ç©ºé—´

---

## 1ï¸âƒ£ æœªå¼€å‘çš„æ½œåœ¨åŠŸèƒ½æ¨¡å— â­â­â­â­â­

### 1.1 ä»£ç ä¸­å¾…å®ŒæˆåŠŸèƒ½(37å¤„TODOæ ‡è®°)

#### ğŸ”´ é«˜ä¼˜å…ˆçº§ (å½±å“æ ¸å¿ƒåŠŸèƒ½)

**1. æƒé™ç®¡ç†æ¨¡å— (PermissionServiceImpl - 5å¤„TODO)**
```java
// æ–‡ä»¶: src/main/java/com/archive/management/service/impl/PermissionServiceImpl.java
// è¡Œæ•°: 1254, 1303, 1315, 1340, 1352

å¾…å®ç°åŠŸèƒ½:
- âœ— æƒé™åŒæ­¥é€»è¾‘ (L1254)
- âœ— æƒé™ä½¿ç”¨ç»Ÿè®¡ (L1303)
- âœ— æ¸…ç†æ— æ•ˆæƒé™å…³è” (L1315)
- âœ— æƒé™è®¿é—®æ—¥å¿— (L1340)
- âœ— ç”¨æˆ·è·¯å¾„æƒé™æ£€æŸ¥ (L1352)

ä¸šåŠ¡å½±å“: å½±å“æƒé™ä½“ç³»çš„å®Œæ•´æ€§å’Œå¯ç»´æŠ¤æ€§
å»ºè®®å·¥æ—¶: 16å°æ—¶
ä¼˜å…ˆçº§: P0
```

**2. éƒ¨é—¨ç®¡ç†æ¨¡å— (DepartmentServiceImpl - 8å¤„TODO)**
```java
// æ–‡ä»¶: src/main/java/com/archive/management/service/impl/DepartmentServiceImpl.java
// è¡Œæ•°: 666, 676, 686, 694, 701, 707, 716, 722

å¾…å®ç°åŠŸèƒ½:
- âœ— éƒ¨é—¨æ•°æ®å¯¼å‡º (L666)
- âœ— éƒ¨é—¨æ•°æ®å¯¼å…¥ (L676)
- âœ— æ‰¹é‡å¯¼å…¥åŠŸèƒ½ (L686)
- âœ— è·å–éƒ¨é—¨æƒé™ (L694)
- âœ— åˆ†é…æƒé™åŠŸèƒ½ (L701)
- âœ— æƒé™æ£€æŸ¥åŠŸèƒ½ (L707)
- âœ— éƒ¨é—¨é€šçŸ¥åŠŸèƒ½ (L716)
- âœ— éƒ¨é—¨æŠ¥å‘Šç”Ÿæˆ (L722)

ä¸šåŠ¡å½±å“: å½±å“éƒ¨é—¨ç®¡ç†çš„å®Œæ•´æ€§
å»ºè®®å·¥æ—¶: 20å°æ—¶
ä¼˜å…ˆçº§: P1
```

**3. å€Ÿé˜…ç®¡ç†æ¨¡å— (BorrowController - 4å¤„TODO)**
```java
// æ–‡ä»¶: src/main/java/com/archive/management/controller/BorrowController.java
// è¡Œæ•°: 53, 158, 251, 386

å¾…å®ç°åŠŸèƒ½:
- âœ— ç”¨æˆ·è®¤è¯é€»è¾‘ä¼˜åŒ– (L53)
- âœ— BorrowServiceæ¥å£æ–¹æ³•è¡¥å…… (L158, L251, L386)

ä¸šåŠ¡å½±å“: å½±å“å€Ÿé˜…åŠŸèƒ½çš„å®Œæ•´æ€§
å»ºè®®å·¥æ—¶: 8å°æ—¶
ä¼˜å…ˆçº§: P1
```

#### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ (å½±å“æ‰©å±•åŠŸèƒ½)

**4. é€šçŸ¥æœåŠ¡æ¨¡å— (NotificationServiceImpl - 3å¤„TODO)**
```java
// æ–‡ä»¶: src/main/java/com/archive/management/service/impl/NotificationServiceImpl.java
// è¡Œæ•°: 284, 298, 630

å¾…å®ç°åŠŸèƒ½:
- âœ— é€šçŸ¥æ¨¡æ¿åˆ›å»ºé€»è¾‘ (L284)
- âœ— è·å–é€šçŸ¥æ¨¡æ¿é€»è¾‘ (L298)
- âœ— æ¨¡æ¿åº”ç”¨é€»è¾‘ (L630)

ä¸šåŠ¡å½±å“: å½±å“é€šçŸ¥ç³»ç»Ÿçš„çµæ´»æ€§
å»ºè®®å·¥æ—¶: 12å°æ—¶
ä¼˜å…ˆçº§: P2
```

**5. å¯¼å‡ºåŠŸèƒ½æ¨¡å— (ExportController + ExportTaskServiceImpl - 4å¤„TODO)**
```java
// æ–‡ä»¶ä½ç½®:
// - src/main/java/com/archive/management/controller/ExportController.java (2å¤„)
// - src/main/java/com/archive/management/service/impl/ExportTaskServiceImpl.java (2å¤„)

å¾…å®ç°åŠŸèƒ½:
- âœ— ä»ä¸Šä¸‹æ–‡è·å–ç”¨æˆ·ID (ExportController L89)
- âœ— ä»æ–‡ä»¶å­˜å‚¨è¯»å–å¹¶è¿”å›æ–‡ä»¶ (ExportController L227)
- âœ— å¯¼å‡ºä»»åŠ¡å®Œæˆååˆ é™¤ä¸´æ—¶æ–‡ä»¶ (ExportTaskServiceImpl L255)
- âœ— æ ¹æ®å®é™…ç”¨æˆ·å¯¹è±¡è·å–ID (ExportTaskServiceImpl L290)

ä¸šåŠ¡å½±å“: å½±å“å¯¼å‡ºåŠŸèƒ½çš„å®Œæ•´æ€§
å»ºè®®å·¥æ—¶: 10å°æ—¶
ä¼˜å…ˆçº§: P2
```

#### ğŸŸ¢ ä½ä¼˜å…ˆçº§ (ä¼˜åŒ–åŠŸèƒ½)

**6. æ—¥å¿—ç®¡ç†æ¨¡å— (LoginLogServiceImpl + AuditLogUtil - 2å¤„TODO)**
```java
å¾…å®ç°åŠŸèƒ½:
- âœ— Excelå¯¼å‡ºå®ç° (LoginLogServiceImpl L248)
- âœ— å®¡è®¡æ—¥å¿—æŒä¹…åŒ– (AuditLogUtil L39)

å»ºè®®å·¥æ—¶: 6å°æ—¶
ä¼˜å…ˆçº§: P3
```

**7. æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å— (ArchiveMessageListener - 1å¤„TODO)**
```java
// æ–‡ä»¶: src/main/java/com/archive/management/mq/listener/ArchiveMessageListener.java
// è¡Œæ•°: 298

å¾…å®ç°åŠŸèƒ½:
- âœ— é‡æ–°å®¡æ ¸è§¦å‘é€»è¾‘

å»ºè®®å·¥æ—¶: 4å°æ—¶
ä¼˜å…ˆçº§: P3
```

**8. å‰ç«¯å¾…å®ŒæˆåŠŸèƒ½ (8å¤„TODO)**
```typescript
// æ–‡ä»¶ä½ç½®:
// 1. frontend/src/views/PersonalizationSettings.vue (L163, L174)
// 2. frontend/src/views/UserAnalytics.vue (L86)
// 3. frontend/src/pages/archive/Search.vue (L394, L399)
// 4. frontend/src/utils/permission.ts (L163)
// 5. frontend/src/pages/system/DepartmentManagement.vue (L559, L593)

å¾…å®ç°åŠŸèƒ½:
- âœ— ä¸ªæ€§åŒ–è®¾ç½®åŠ è½½/ä¿å­˜
- âœ— ç”¨æˆ·è¡Œä¸ºåˆ†ææ•°æ®åŠ è½½
- âœ— æœç´¢ç»“æœè·³è½¬è¯¦æƒ…/ç¼–è¾‘
- âœ— è§’è‰²æ£€æŸ¥é€»è¾‘
- âœ— éƒ¨é—¨ç®¡ç†ä¸­çš„ç”¨æˆ·åˆ—è¡¨åŠ è½½å’Œç®¡ç†å‘˜å–æ¶ˆ

å»ºè®®å·¥æ—¶: 12å°æ—¶
ä¼˜å…ˆçº§: P2
```

### 1.2 åŠŸèƒ½æ‰©å±•å»ºè®®

#### ğŸŒŸ å®æ—¶é€šçŸ¥ç³»ç»Ÿ (WebSocketå·²æœ‰åŸºç¡€,æœªå……åˆ†åˆ©ç”¨)

**ç°çŠ¶**: 
- âœ… WebSocketConfigå·²é…ç½®
- âœ… NotificationWebSocketHandlerå·²å®ç°
- âš ï¸ å‰ç«¯è¿æ¥å’ŒUIæœªå®Œå…¨å®ç°

**å»ºè®®è¡¥å……**:
```typescript
// å‰ç«¯WebSocketè¿æ¥ç®¡ç†
// frontend/src/services/websocket.ts
import { useNotificationStore } from '@/stores/notification'

export class WebSocketService {
  private socket: WebSocket | null = null
  private reconnectInterval: number = 5000
  private reconnectAttempts: number = 0
  private maxReconnectAttempts: number = 5

  connect(userId: string) {
    const token = localStorage.getItem('token')
    this.socket = new WebSocket(
      `ws://localhost:8080/ws/notifications?token=${token}`
    )
    
    this.socket.onopen = () => {
      console.log('WebSocketè¿æ¥æˆåŠŸ')
      this.reconnectAttempts = 0
    }
    
    this.socket.onmessage = (event) => {
      const notification = JSON.parse(event.data)
      this.handleNotification(notification)
    }
    
    this.socket.onclose = () => {
      this.handleReconnect()
    }
  }
  
  private handleNotification(notification: any) {
    const notificationStore = useNotificationStore()
    
    // æ·»åŠ åˆ°é€šçŸ¥åˆ—è¡¨
    notificationStore.addNotification(notification)
    
    // æ˜¾ç¤ºç³»ç»Ÿé€šçŸ¥
    ElNotification({
      title: notification.title,
      message: notification.content,
      type: notification.level,
      duration: 5000
    })
  }
  
  private handleReconnect() {
    if (this.reconnectAttempts < this.maxReconnectAttempts) {
      this.reconnectAttempts++
      setTimeout(() => this.connect(userId), this.reconnectInterval)
    }
  }
}
```

**é¢„æœŸæ”¶ç›Š**:
- å®æ—¶æ¶ˆæ¯æ¨é€å»¶è¿Ÿ < 500ms
- æå‡ç”¨æˆ·äº¤äº’ä½“éªŒ
- æ”¯æŒå®¡æ‰¹ã€å€Ÿé˜…æé†’ç­‰å®æ—¶é€šçŸ¥

---

## 2ï¸âƒ£ ç”¨æˆ·ä½“éªŒéœ€è¦ä¼˜åŒ–çš„ç¯èŠ‚ â­â­â­â­

### 2.1 ç§»åŠ¨ç«¯å“åº”å¼é€‚é…

**ç°çŠ¶æ£€æŸ¥**:
```bash
# å‘ç°10å¤„@mediaæŸ¥è¯¢,è¯´æ˜éƒ¨åˆ†é¡µé¢æœ‰å“åº”å¼è®¾è®¡
grep -r "@media" frontend/src --include="*.vue" --include="*.scss"
```

**å‘ç°çš„å“åº”å¼é¡µé¢**:
- âœ… Login.vue (ç™»å½•é¡µ)
- âœ… SystemMonitoring.vue (ç³»ç»Ÿç›‘æ§)
- âœ… AppHeader.vue (é¡¶éƒ¨å¯¼èˆª)
- âœ… NotificationCenter (é€šçŸ¥ä¸­å¿ƒ)
- âœ… FilePreviewç»„ä»¶ (5ä¸ªé¢„è§ˆç»„ä»¶)

**ç¼ºå°‘å“åº”å¼çš„å…³é”®é¡µé¢**:
- âŒ æ¡£æ¡ˆåˆ—è¡¨é¡µ (List.vue)
- âŒ æ¡£æ¡ˆè¯¦æƒ…é¡µ (Detail.vue)
- âŒ ç”¨æˆ·ç®¡ç†é¡µ
- âŒ ç³»ç»Ÿè®¾ç½®é¡µ
- âŒ ç»Ÿè®¡æŠ¥è¡¨é¡µ

**ä¼˜åŒ–å»ºè®®**:
```vue
<!-- 1. åˆ›å»ºå…¨å±€å“åº”å¼Mixin -->
<!-- frontend/src/composables/useResponsive.ts -->
import { ref, onMounted, onUnmounted } from 'vue'

export function useResponsive() {
  const isMobile = ref(false)
  const isTablet = ref(false)
  const isDesktop = ref(true)
  
  const checkDevice = () => {
    const width = window.innerWidth
    isMobile.value = width < 768
    isTablet.value = width >= 768 && width < 1024
    isDesktop.value = width >= 1024
  }
  
  onMounted(() => {
    checkDevice()
    window.addEventListener('resize', checkDevice)
  })
  
  onUnmounted(() => {
    window.removeEventListener('resize', checkDevice)
  })
  
  return {
    isMobile,
    isTablet,
    isDesktop
  }
}

<!-- 2. åœ¨æ¡£æ¡ˆåˆ—è¡¨é¡µä½¿ç”¨ -->
<template>
  <div class="archive-list">
    <!-- æ¡Œé¢ç«¯: è¡¨æ ¼è§†å›¾ -->
    <el-table v-if="!isMobile" :data="archives">
      <!-- è¡¨æ ¼åˆ— -->
    </el-table>
    
    <!-- ç§»åŠ¨ç«¯: å¡ç‰‡è§†å›¾ -->
    <div v-else class="mobile-cards">
      <el-card v-for="archive in archives" :key="archive.id">
        <h3>{{ archive.title }}</h3>
        <p>{{ archive.category }}</p>
        <div class="actions">
          <el-button size="small">æŸ¥çœ‹</el-button>
          <el-button size="small">ç¼–è¾‘</el-button>
        </div>
      </el-card>
    </div>
  </div>
</template>

<script setup lang="ts">
import { useResponsive } from '@/composables/useResponsive'
const { isMobile } = useResponsive()
</script>
```

**å»ºè®®å·¥æ—¶**: 40å°æ—¶  
**ä¼˜å…ˆçº§**: P0 (é«˜)

### 2.2 å›½é™…åŒ–(i18n)æ”¯æŒ

**ç°çŠ¶**:
- âœ… Element Plusä½¿ç”¨äº†ä¸­æ–‡è¯­è¨€åŒ… (zhCn)
- âŒ æ²¡æœ‰å®Œæ•´çš„i18næ¡†æ¶
- âŒ ç•Œé¢æ–‡å­—ç¡¬ç¼–ç åœ¨ç»„ä»¶ä¸­

**ä¼˜åŒ–æ–¹æ¡ˆ**:
```typescript
// 1. å®‰è£…vue-i18n
// npm install vue-i18n@9

// 2. åˆ›å»ºè¯­è¨€æ–‡ä»¶
// frontend/src/locales/zh-CN.ts
export default {
  common: {
    confirm: 'ç¡®è®¤',
    cancel: 'å–æ¶ˆ',
    save: 'ä¿å­˜',
    delete: 'åˆ é™¤',
    edit: 'ç¼–è¾‘',
    search: 'æœç´¢'
  },
  archive: {
    title: 'æ¡£æ¡ˆæ ‡é¢˜',
    category: 'æ¡£æ¡ˆåˆ†ç±»',
    createTime: 'åˆ›å»ºæ—¶é—´',
    status: 'çŠ¶æ€'
  }
}

// frontend/src/locales/en-US.ts
export default {
  common: {
    confirm: 'Confirm',
    cancel: 'Cancel',
    save: 'Save',
    delete: 'Delete',
    edit: 'Edit',
    search: 'Search'
  },
  archive: {
    title: 'Archive Title',
    category: 'Category',
    createTime: 'Create Time',
    status: 'Status'
  }
}

// 3. é…ç½®i18n
// frontend/src/i18n/index.ts
import { createI18n } from 'vue-i18n'
import zhCN from './locales/zh-CN'
import enUS from './locales/en-US'

const i18n = createI18n({
  legacy: false,
  locale: localStorage.getItem('locale') || 'zh-CN',
  fallbackLocale: 'zh-CN',
  messages: {
    'zh-CN': zhCN,
    'en-US': enUS
  }
})

export default i18n

// 4. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
<template>
  <el-button>{{ $t('common.confirm') }}</el-button>
  <span>{{ $t('archive.title') }}</span>
</template>
```

**å»ºè®®å·¥æ—¶**: 30å°æ—¶  
**ä¼˜å…ˆçº§**: P2 (ä¸­)

### 2.3 æ— éšœç¢è®¿é—®(Accessibility)

**ç°çŠ¶**:
```bash
# æ£€æŸ¥ARIAå±æ€§ä½¿ç”¨æƒ…å†µ
grep -r "aria-\|role=" frontend/src --include="*.vue"
# ç»“æœ: ä»…4å¤„roleå±æ€§,æ— å®Œæ•´çš„ARIAæ”¯æŒ
```

**ä¼˜åŒ–å»ºè®®**:
```vue
<!-- æ·»åŠ ARIAå±æ€§ç¤ºä¾‹ -->
<template>
  <!-- 1. è¡¨å•æ ‡ç­¾å…³è” -->
  <label for="username">ç”¨æˆ·å</label>
  <input id="username" type="text" aria-required="true" />
  
  <!-- 2. æŒ‰é’®æè¿° -->
  <el-button aria-label="åˆ é™¤æ¡£æ¡ˆ" @click="deleteArchive">
    <el-icon><Delete /></el-icon>
  </el-button>
  
  <!-- 3. å¯¼èˆªæ ‡è®° -->
  <nav aria-label="ä¸»å¯¼èˆª">
    <ul role="menu">
      <li role="menuitem"><a href="/archives">æ¡£æ¡ˆç®¡ç†</a></li>
    </ul>
  </nav>
  
  <!-- 4. çŠ¶æ€æç¤º -->
  <div role="alert" aria-live="polite">
    {{ statusMessage }}
  </div>
  
  <!-- 5. æ¨¡æ€æ¡† -->
  <el-dialog 
    v-model="visible" 
    role="dialog" 
    aria-modal="true"
    aria-labelledby="dialog-title"
  >
    <h2 id="dialog-title">åˆ é™¤ç¡®è®¤</h2>
  </el-dialog>
</template>
```

**å»ºè®®å·¥æ—¶**: 20å°æ—¶  
**ä¼˜å…ˆçº§**: P3 (ä½)

### 2.4 PWAæ”¯æŒ

**ç°çŠ¶**: æ— PWAåŠŸèƒ½

**ä¼˜åŒ–æ–¹æ¡ˆ**:
```javascript
// 1. å®‰è£…Vite PWAæ’ä»¶
// npm install vite-plugin-pwa -D

// 2. é…ç½®vite.config.ts
import { VitePWA } from 'vite-plugin-pwa'

export default defineConfig({
  plugins: [
    VitePWA({
      registerType: 'autoUpdate',
      includeAssets: ['favicon.ico', 'robots.txt', 'apple-touch-icon.png'],
      manifest: {
        name: 'æ¡£æ¡ˆç®¡ç†ç³»ç»Ÿ',
        short_name: 'æ¡£æ¡ˆç³»ç»Ÿ',
        description: 'ä¼ä¸šçº§æ¡£æ¡ˆæ•°å­—åŒ–ç®¡ç†å¹³å°',
        theme_color: '#409EFF',
        icons: [
          {
            src: 'pwa-192x192.png',
            sizes: '192x192',
            type: 'image/png'
          },
          {
            src: 'pwa-512x512.png',
            sizes: '512x512',
            type: 'image/png'
          }
        ]
      },
      workbox: {
        globPatterns: ['**/*.{js,css,html,ico,png,svg,woff2}'],
        runtimeCaching: [
          {
            urlPattern: /^https:\/\/api\.archive\.com\/.*/i,
            handler: 'NetworkFirst',
            options: {
              cacheName: 'api-cache',
              expiration: {
                maxEntries: 50,
                maxAgeSeconds: 60 * 60 // 1 hour
              }
            }
          }
        ]
      }
    })
  ]
})
```

**é¢„æœŸæ”¶ç›Š**:
- æ”¯æŒç¦»çº¿è®¿é—®
- æå‡åŠ è½½é€Ÿåº¦
- å¯æ·»åŠ åˆ°ä¸»å±å¹•

**å»ºè®®å·¥æ—¶**: 16å°æ—¶  
**ä¼˜å…ˆçº§**: P2 (ä¸­)

---

## 3ï¸âƒ£ ä»£ç è´¨é‡æˆ–æ€§èƒ½å¯æå‡çš„éƒ¨åˆ† â­â­â­â­

### 3.1 ä»£ç é‡å¤ç‡ä¼˜åŒ–

**å‘ç°çš„ä»£ç é‡å¤æ¨¡å¼**:

#### 1. ç”¨æˆ·éªŒè¯é€»è¾‘é‡å¤
```java
// å¤šä¸ªControllerä¸­é‡å¤å‡ºç°
User user = getCurrentUser();
if (user == null || !user.getEnabled()) {
    throw new UnauthorizedException("ç”¨æˆ·æœªç™»å½•æˆ–å·²ç¦ç”¨");
}
```

**ä¼˜åŒ–æ–¹æ¡ˆ**:
```java
// 1. ä½¿ç”¨AOPç»Ÿä¸€å¤„ç†
@Aspect
@Component
public class UserValidationAspect {
    
    @Before("@annotation(RequireAuth)")
    public void validateUser() {
        User user = SecurityContextHolder.getCurrentUser();
        if (user == null) {
            throw new UnauthorizedException("ç”¨æˆ·æœªç™»å½•");
        }
        if (!user.getEnabled()) {
            throw new UnauthorizedException("ç”¨æˆ·å·²ç¦ç”¨");
        }
    }
}

// 2. ä½¿ç”¨æ³¨è§£ç®€åŒ–
@RequireAuth
public Result<Archive> getArchive(Long id) {
    // æ— éœ€é‡å¤éªŒè¯ä»£ç 
    return Result.success(archiveService.getById(id));
}
```

#### 2. åˆ†é¡µæŸ¥è¯¢ä»£ç é‡å¤
```java
// å¤šå¤„å‡ºç°ç±»ä¼¼ä»£ç 
Page<Archive> page = new Page<>(pageNum, pageSize);
IPage<Archive> result = archiveMapper.selectPage(page, queryWrapper);
PageResult<Archive> pageResult = PageResult.of(result);
```

**ä¼˜åŒ–æ–¹æ¡ˆ**:
```java
// åˆ›å»ºåˆ†é¡µå·¥å…·ç±»
public class PageUtils {
    
    public static <T> PageResult<T> toPageResult(IPage<T> page) {
        return PageResult.<T>builder()
            .list(page.getRecords())
            .total(page.getTotal())
            .page(page.getCurrent())
            .size(page.getSize())
            .pages(page.getPages())
            .build();
    }
    
    public static <T> Page<T> createPage(Integer pageNum, Integer pageSize) {
        pageNum = pageNum == null || pageNum < 1 ? 1 : pageNum;
        pageSize = pageSize == null || pageSize < 1 ? 20 : pageSize;
        return new Page<>(pageNum, pageSize);
    }
}

// ä½¿ç”¨ç®€åŒ–åçš„ä»£ç 
IPage<Archive> result = archiveMapper.selectPage(
    PageUtils.createPage(pageNum, pageSize), 
    queryWrapper
);
return Result.success(PageUtils.toPageResult(result));
```

### 3.2 æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### 1. å‰ç«¯è™šæ‹Ÿæ»šåŠ¨(å¤§åˆ—è¡¨ä¼˜åŒ–)
```vue
<!-- å½“å‰å®ç°: ç›´æ¥æ¸²æŸ“æ‰€æœ‰åˆ—è¡¨é¡¹ -->
<div v-for="item in largeList" :key="item.id">
  {{ item.name }}
</div>

<!-- ä¼˜åŒ–æ–¹æ¡ˆ: ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ -->
<!-- npm install vue-virtual-scroller -->
<template>
  <RecycleScroller
    :items="largeList"
    :item-size="50"
    key-field="id"
    v-slot="{ item }"
  >
    <div class="item">{{ item.name }}</div>
  </RecycleScroller>
</template>

<script setup lang="ts">
import { RecycleScroller } from 'vue-virtual-scroller'
import 'vue-virtual-scroller/dist/vue-virtual-scroller.css'
</script>
```

#### 2. æ•°æ®åº“N+1æŸ¥è¯¢ä¼˜åŒ–
```java
// é—®é¢˜ä»£ç : N+1æŸ¥è¯¢
public List<ArchiveVO> getArchiveList() {
    List<Archive> archives = archiveMapper.selectAll();
    return archives.stream()
        .map(archive -> {
            // Næ¬¡é¢å¤–æŸ¥è¯¢
            Category category = categoryMapper.selectById(archive.getCategoryId());
            User creator = userMapper.selectById(archive.getCreatorId());
            // ...æ„å»ºVO
        })
        .collect(Collectors.toList());
}

// ä¼˜åŒ–æ–¹æ¡ˆ: ä½¿ç”¨JOINä¸€æ¬¡æ€§æŸ¥è¯¢
@Select("SELECT a.*, c.name as category_name, u.username as creator_name " +
        "FROM arc_archive a " +
        "LEFT JOIN arc_category c ON a.category_id = c.category_id " +
        "LEFT JOIN sys_user u ON a.submit_user_id = u.user_id " +
        "WHERE a.status = #{status}")
List<ArchiveVO> selectArchivesWithDetails(@Param("status") Integer status);
```

#### 3. Redisç¼“å­˜ç­–ç•¥ä¼˜åŒ–
```java
// å½“å‰å¯èƒ½çš„é—®é¢˜: ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©

// ä¼˜åŒ–æ–¹æ¡ˆ1: é˜²æ­¢ç¼“å­˜ç©¿é€
@Cacheable(value = "archive", key = "#id", unless = "#result == null")
public Archive getById(Long id) {
    Archive archive = archiveMapper.selectById(id);
    // å³ä½¿ç»“æœä¸ºnullä¹Ÿç¼“å­˜ä¸€ä¸ªç©ºå¯¹è±¡,è®¾ç½®è¾ƒçŸ­è¿‡æœŸæ—¶é—´
    if (archive == null) {
        redisTemplate.opsForValue().set(
            "archive:" + id, 
            "null", 
            5, 
            TimeUnit.MINUTES
        );
    }
    return archive;
}

// ä¼˜åŒ–æ–¹æ¡ˆ2: é˜²æ­¢ç¼“å­˜é›ªå´©(éšæœºè¿‡æœŸæ—¶é—´)
@CacheEvict(value = "archive", key = "#id")
public void update(Archive archive) {
    archiveMapper.updateById(archive);
    // è®¾ç½®éšæœºè¿‡æœŸæ—¶é—´: 1-2å°æ—¶
    int randomMinutes = ThreadLocalRandom.current().nextInt(60, 120);
    redisTemplate.expire("archive:" + archive.getId(), randomMinutes, TimeUnit.MINUTES);
}
```

**å»ºè®®å·¥æ—¶**: 30å°æ—¶  
**ä¼˜å…ˆçº§**: P1 (é«˜)

### 3.3 ä»£ç è´¨é‡æ”¹è¿›

**å»ºè®®å¼•å…¥å·¥å…·**:
1. **SonarQube**: ä»£ç è´¨é‡åˆ†æ
2. **JaCoCo**: æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
3. **ESLint + Prettier**: å‰ç«¯ä»£ç è§„èŒƒ

**é›†æˆæ–¹æ¡ˆ**:
```xml
<!-- pom.xmlæ·»åŠ JaCoCoæ’ä»¶ -->
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <version>0.8.10</version>
    <executions>
        <execution>
            <goals>
                <goal>prepare-agent</goal>
            </goals>
        </execution>
        <execution>
            <id>report</id>
            <phase>test</phase>
            <goals>
                <goal>report</goal>
            </goals>
        </execution>
    </executions>
</plugin>
```

---

## 4ï¸âƒ£ æµ‹è¯•è¦†ç›–ç‡ä¸è¶³çš„ç»„ä»¶ â­â­â­â­â­

### 4.1 åç«¯æµ‹è¯•ç°çŠ¶

**å·²æœ‰æµ‹è¯•** (26ä¸ªæµ‹è¯•æ–‡ä»¶):
```
âœ… Controllerå±‚: 5ä¸ªæµ‹è¯•
   - ArchiveControllerTest
   - UserControllerTest  
   - BatchOperationControllerTest
   - AdvancedSearchControllerTest
   - ArchiveControllerIntegrationTest

âœ… Serviceå±‚: 8ä¸ªæµ‹è¯•
   - ArchiveServiceTest
   - UserServiceTest
   - AuthServiceTest
   - NotificationServiceTest
   - SmsServiceTest
   - WorkflowServiceTest
   - BatchOperationServiceTest
   - AdvancedSearchServiceTest

âœ… é›†æˆæµ‹è¯•: 3ä¸ª
âœ… æ€§èƒ½æµ‹è¯•: 2ä¸ª
âœ… å®šæ—¶ä»»åŠ¡æµ‹è¯•: 3ä¸ª
```

**æµ‹è¯•è¦†ç›–ç¼ºå£**:
```
âŒ CategoryService - æ— æµ‹è¯•
âŒ RoleService - æ— æµ‹è¯•
âŒ PermissionService - æ— æµ‹è¯•
âŒ BorrowService - æ— æµ‹è¯•
âŒ SystemConfigService - æ— æµ‹è¯•
âŒ StatisticsService - æ— æµ‹è¯•
âŒ ExportService - æ— æµ‹è¯•
âŒ Mapperå±‚ - ç¼ºå°‘ç‹¬ç«‹æµ‹è¯•
```

**è¡¥å……æµ‹è¯•æ–¹æ¡ˆ**:
```java
// ç¤ºä¾‹: CategoryServiceTest
@SpringBootTest
class CategoryServiceTest {
    
    @Autowired
    private CategoryService categoryService;
    
    @MockBean
    private CategoryMapper categoryMapper;
    
    @Test
    @DisplayName("åˆ›å»ºåˆ†ç±» - æˆåŠŸ")
    void testCreateCategory_Success() {
        // Given
        Category category = new Category();
        category.setCategoryName("æµ‹è¯•åˆ†ç±»");
        category.setCategoryCode("TEST");
        
        when(categoryMapper.insert(any())).thenReturn(1);
        
        // When
        Long categoryId = categoryService.create(category);
        
        // Then
        assertNotNull(categoryId);
        verify(categoryMapper, times(1)).insert(any());
    }
    
    @Test
    @DisplayName("è·å–åˆ†ç±»æ ‘ - æˆåŠŸ")
    void testGetCategoryTree_Success() {
        // Given
        List<Category> mockCategories = createMockCategories();
        when(categoryMapper.selectList(any())).thenReturn(mockCategories);
        
        // When
        List<CategoryTreeNode> tree = categoryService.getCategoryTree();
        
        // Then
        assertNotNull(tree);
        assertTrue(tree.size() > 0);
    }
    
    @Test
    @DisplayName("åˆ é™¤åˆ†ç±» - æœ‰å­åˆ†ç±»åº”æŠ›å‡ºå¼‚å¸¸")
    void testDeleteCategory_HasChildren_ShouldThrowException() {
        // Given
        Long categoryId = 1L;
        when(categoryMapper.countChildren(categoryId)).thenReturn(5);
        
        // When & Then
        assertThrows(BusinessException.class, 
            () -> categoryService.delete(categoryId));
    }
}
```

**ç›®æ ‡æµ‹è¯•è¦†ç›–ç‡**:
- Controllerå±‚: 80%+
- Serviceå±‚: 85%+
- Mapperå±‚: 70%+
- æ•´ä½“è¦†ç›–ç‡: 75%+

**å»ºè®®å·¥æ—¶**: 60å°æ—¶  
**ä¼˜å…ˆçº§**: P0 (æœ€é«˜)

### 4.2 å‰ç«¯æµ‹è¯•ç°çŠ¶

**å·²æœ‰æµ‹è¯•** (ä»…2ä¸ªE2Eæµ‹è¯•):
```
âœ… tests/e2e/example.spec.ts
âœ… tests/e2e/test-register-button.spec.ts
```

**ä¸¥é‡ä¸è¶³**: 
- âŒ æ— å•å…ƒæµ‹è¯•
- âŒ æ— ç»„ä»¶æµ‹è¯•
- âŒ E2Eæµ‹è¯•è¦†ç›–ç‡ < 5%

**è¡¥å……æµ‹è¯•æ–¹æ¡ˆ**:

#### 1. å•å…ƒæµ‹è¯• (Vitest + Vue Test Utils)
```typescript
// tests/unit/utils/permission.spec.ts
import { describe, it, expect, vi } from 'vitest'
import { hasPermission, hasRole } from '@/utils/permission'

describe('Permission Utils', () => {
  it('åº”è¯¥æ­£ç¡®æ£€æŸ¥ç”¨æˆ·æƒé™', () => {
    const mockUser = {
      permissions: ['user:create', 'user:edit']
    }
    
    expect(hasPermission('user:create', mockUser)).toBe(true)
    expect(hasPermission('user:delete', mockUser)).toBe(false)
  })
  
  it('åº”è¯¥æ­£ç¡®æ£€æŸ¥ç”¨æˆ·è§’è‰²', () => {
    const mockUser = {
      roles: ['ADMIN', 'USER']
    }
    
    expect(hasRole('ADMIN', mockUser)).toBe(true)
    expect(hasRole('SUPER_ADMIN', mockUser)).toBe(false)
  })
})
```

#### 2. ç»„ä»¶æµ‹è¯•
```typescript
// tests/unit/components/ArchiveForm.spec.ts
import { mount } from '@vue/test-utils'
import { describe, it, expect, vi } from 'vitest'
import ArchiveForm from '@/components/ArchiveForm.vue'
import ElementPlus from 'element-plus'

describe('ArchiveForm.vue', () => {
  it('åº”è¯¥æ­£ç¡®æ¸²æŸ“è¡¨å•', () => {
    const wrapper = mount(ArchiveForm, {
      global: {
        plugins: [ElementPlus]
      }
    })
    
    expect(wrapper.find('form').exists()).toBe(true)
    expect(wrapper.find('input[name="title"]').exists()).toBe(true)
  })
  
  it('æäº¤ç©ºè¡¨å•åº”æ˜¾ç¤ºéªŒè¯é”™è¯¯', async () => {
    const wrapper = mount(ArchiveForm)
    
    await wrapper.find('form').trigger('submit')
    await wrapper.vm.$nextTick()
    
    expect(wrapper.find('.error-message').text()).toContain('æ ‡é¢˜ä¸èƒ½ä¸ºç©º')
  })
  
  it('æäº¤æœ‰æ•ˆè¡¨å•åº”è§¦å‘submitäº‹ä»¶', async () => {
    const wrapper = mount(ArchiveForm)
    
    await wrapper.find('input[name="title"]').setValue('æµ‹è¯•æ¡£æ¡ˆ')
    await wrapper.find('select[name="category"]').setValue('1')
    await wrapper.find('form').trigger('submit')
    
    expect(wrapper.emitted('submit')).toBeTruthy()
    expect(wrapper.emitted('submit')[0][0]).toEqual({
      title: 'æµ‹è¯•æ¡£æ¡ˆ',
      categoryId: '1'
    })
  })
})
```

#### 3. E2Eæµ‹è¯•æ‰©å±• (Playwright)
```typescript
// tests/e2e/archive-management.spec.ts
import { test, expect } from '@playwright/test'

test.describe('æ¡£æ¡ˆç®¡ç†å®Œæ•´æµç¨‹', () => {
  test.beforeEach(async ({ page }) => {
    // ç™»å½•
    await page.goto('http://localhost:3000/login')
    await page.fill('input[name="username"]', 'admin')
    await page.fill('input[name="password"]', 'admin123')
    await page.click('button[type="submit"]')
    await page.waitForURL('**/dashboard')
  })
  
  test('åº”è¯¥èƒ½å¤Ÿåˆ›å»ºæ¡£æ¡ˆ', async ({ page }) => {
    // è¿›å…¥æ¡£æ¡ˆæ–°å¢é¡µé¢
    await page.goto('http://localhost:3000/archive/add')
    
    // å¡«å†™è¡¨å•
    await page.fill('input[name="title"]', 'E2Eæµ‹è¯•æ¡£æ¡ˆ')
    await page.selectOption('select[name="category"]', '1')
    await page.fill('textarea[name="abstract"]', 'è¿™æ˜¯æµ‹è¯•æ‘˜è¦')
    
    // æäº¤è¡¨å•
    await page.click('button:has-text("æäº¤")')
    
    // éªŒè¯æˆåŠŸæ¶ˆæ¯
    await expect(page.locator('.el-message--success')).toBeVisible()
    await expect(page.locator('.el-message--success')).toContainText('åˆ›å»ºæˆåŠŸ')
  })
  
  test('åº”è¯¥èƒ½å¤Ÿæœç´¢æ¡£æ¡ˆ', async ({ page }) => {
    await page.goto('http://localhost:3000/archive/list')
    
    // è¾“å…¥æœç´¢å…³é”®è¯
    await page.fill('input[placeholder="æœç´¢æ¡£æ¡ˆ"]', 'æµ‹è¯•')
    await page.click('button:has-text("æœç´¢")')
    
    // ç­‰å¾…æœç´¢ç»“æœ
    await page.waitForSelector('.archive-list-item')
    
    // éªŒè¯ç»“æœåŒ…å«å…³é”®è¯
    const firstItem = page.locator('.archive-list-item').first()
    await expect(firstItem).toContainText('æµ‹è¯•')
  })
  
  test('åº”è¯¥èƒ½å¤Ÿåˆ é™¤æ¡£æ¡ˆ', async ({ page }) => {
    await page.goto('http://localhost:3000/archive/list')
    
    // ç‚¹å‡»ç¬¬ä¸€ä¸ªæ¡£æ¡ˆçš„åˆ é™¤æŒ‰é’®
    await page.locator('.archive-list-item').first()
      .locator('button:has-text("åˆ é™¤")').click()
    
    // ç¡®è®¤åˆ é™¤
    await page.locator('.el-message-box__btns button:has-text("ç¡®å®š")').click()
    
    // éªŒè¯æˆåŠŸæ¶ˆæ¯
    await expect(page.locator('.el-message--success')).toBeVisible()
  })
})
```

**æµ‹è¯•é…ç½®**:
```typescript
// vitest.config.ts
import { defineConfig } from 'vitest/config'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  test: {
    environment: 'jsdom',
    coverage: {
      provider: 'istanbul',
      reporter: ['text', 'json', 'html'],
      exclude: [
        'node_modules/',
        'tests/',
        '**/*.d.ts',
        '**/*.config.*'
      ]
    }
  }
})
```

**ç›®æ ‡æµ‹è¯•è¦†ç›–ç‡**:
- ç»„ä»¶å•å…ƒæµ‹è¯•: 70%+
- å·¥å…·å‡½æ•°æµ‹è¯•: 90%+
- E2Eå…³é”®æµç¨‹: 100%

**å»ºè®®å·¥æ—¶**: 80å°æ—¶  
**ä¼˜å…ˆçº§**: P0 (æœ€é«˜)

---

## 5ï¸âƒ£ æ–‡æ¡£ç¼ºå¤±æˆ–ä¸å®Œå–„çš„å†…å®¹ â­â­â­

### 5.1 ç°æœ‰æ–‡æ¡£

**å·²æœ‰æ–‡æ¡£** (12ä¸ª):
```
âœ… README-å¼€å‘æ–‡æ¡£å¯¼èˆª.md
âœ… AIå¼€å‘åŠ©æ‰‹MCPå·¥å…·ä½¿ç”¨è§„åˆ™.md
âœ… é¡¹ç›®å®Œå–„è®¡åˆ’ä¸è¡ŒåŠ¨æŒ‡å—.md
âœ… å‰ç«¯åŠŸèƒ½å¼€å‘æŒ‡å—.md
âœ… åç«¯å¼€å‘è§„èŒƒ.md
âœ… ä¸šåŠ¡æµç¨‹è¯¦ç»†è®¾è®¡.md
âœ… é¡¹ç›®ç»“æ„ä¸å¼€å‘æµç¨‹.md
âœ… æ•°æ®åº“è®¾è®¡.md
âœ… å‰ç«¯å¼€å‘è§„èŒƒ.md
âœ… APIæ¥å£è§„èŒƒ.md
âœ… ç³»ç»Ÿæ¶æ„è®¾è®¡.md
âœ… RIPER-5åè®®_MCPæ·±åº¦æ•´åˆç‰ˆ.md
```

### 5.2 å»ºè®®è¡¥å……çš„æ–‡æ¡£

#### 1. QUICK_START.md (å¿«é€Ÿå¼€å§‹æŒ‡å—)
```markdown
# æ¡£æ¡ˆç®¡ç†ç³»ç»Ÿ - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨

### å‰ç½®è¦æ±‚
- Docker Desktop 4.0+
- Node.js 18+
- JDK 17+

### æ–¹å¼ä¸€: Docker Compose (æ¨è)
\`\`\`bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd archive-management-system

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶,è®¾ç½®æ•°æ®åº“å¯†ç ç­‰

# 3. ä¸€é”®å¯åŠ¨
docker-compose up -d

# 4. ç­‰å¾…æœåŠ¡å¯åŠ¨(çº¦2åˆ†é’Ÿ)
docker-compose logs -f backend

# 5. è®¿é—®ç³»ç»Ÿ
æ‰“å¼€æµè§ˆå™¨: http://localhost:3000
é»˜è®¤è´¦å·: admin / admin123
\`\`\`

### æ–¹å¼äºŒ: æœ¬åœ°å¼€å‘
\`\`\`bash
# 1. å¯åŠ¨MySQL
docker run -d -p 3306:3306 \
  -e MYSQL_ROOT_PASSWORD=root123 \
  -e MYSQL_DATABASE=archive_management \
  --name archive-mysql \
  mysql:8.0

# 2. åˆå§‹åŒ–æ•°æ®åº“
mysql -h 127.0.0.1 -uroot -proot123 < database/01_database_init.sql

# 3. å¯åŠ¨åç«¯
cd archive-management-system
mvn spring-boot:run

# 4. å¯åŠ¨å‰ç«¯
cd frontend
npm install
npm run dev

# 5. è®¿é—®
http://localhost:5173
\`\`\`

## ğŸ“ ä¸‹ä¸€æ­¥
- é˜…è¯» [å¼€å‘æ–‡æ¡£å¯¼èˆª](./README-å¼€å‘æ–‡æ¡£å¯¼èˆª.md)
- æŸ¥çœ‹ [APIæ¥å£è§„èŒƒ](./APIæ¥å£è§„èŒƒ.md)
```

#### 2. CHANGELOG.md (ç‰ˆæœ¬å˜æ›´æ—¥å¿—)
```markdown
# æ›´æ–°æ—¥å¿—

## [1.0.0] - 2025-10-15

### æ–°å¢
- å®Œæ•´çš„æ¡£æ¡ˆç®¡ç†åŠŸèƒ½
- å€Ÿé˜…ç®¡ç†ç³»ç»Ÿ
- æƒé™è§’è‰²ç®¡ç†
- ç»Ÿè®¡åˆ†æåŠŸèƒ½
- å®æ—¶é€šçŸ¥ç³»ç»Ÿ
- æ–‡ä»¶é¢„è§ˆåŠŸèƒ½

### ä¼˜åŒ–
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- å‰ç«¯å“åº”é€Ÿåº¦æå‡30%
- ç¼“å­˜å‘½ä¸­ç‡æå‡è‡³90%

### ä¿®å¤
- ä¿®å¤å€Ÿé˜…é€¾æœŸæé†’BUG
- ä¿®å¤æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶é—®é¢˜
- ä¿®å¤æƒé™ç»§æ‰¿é€»è¾‘é”™è¯¯
```

#### 3. DEPLOYMENT.md (éƒ¨ç½²æŒ‡å—)
```markdown
# éƒ¨ç½²æŒ‡å—

## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### æœåŠ¡å™¨è¦æ±‚
- CPU: 4æ ¸+
- å†…å­˜: 8GB+
- ç£ç›˜: 100GB+
- æ“ä½œç³»ç»Ÿ: Ubuntu 20.04 LTS / CentOS 8

### å®‰å…¨åŠ å›º
1. ä¿®æ”¹é»˜è®¤å¯†ç 
2. é…ç½®HTTPSè¯ä¹¦
3. å¯ç”¨é˜²ç«å¢™
4. é…ç½®å¤‡ä»½ç­–ç•¥

### æ€§èƒ½è°ƒä¼˜
1. JVMå‚æ•°ä¼˜åŒ–
2. MySQLè¿æ¥æ± é…ç½®
3. Redisç¼“å­˜ç­–ç•¥
4. Nginxè´Ÿè½½å‡è¡¡
```

#### 4. TROUBLESHOOTING.md (æ•…éšœæ’æŸ¥)
```markdown
# æ•…éšœæ’æŸ¥æŒ‡å—

## å¸¸è§é—®é¢˜

### Q1: åº”ç”¨æ— æ³•è¿æ¥æ•°æ®åº“
**ç—‡çŠ¶**: å¯åŠ¨æ—¶æŠ¥é”™ "Cannot connect to database"

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
2. éªŒè¯æ•°æ®åº“è¿æ¥é…ç½®
3. æ£€æŸ¥é˜²ç«å¢™è§„åˆ™
4. æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—

### Q2: å‰ç«¯é¡µé¢ç™½å±
**ç—‡çŠ¶**: æµè§ˆå™¨è®¿é—®æ˜¾ç¤ºç©ºç™½é¡µ

**è§£å†³æ–¹æ¡ˆ**:
1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹é”™è¯¯
2. æ£€æŸ¥Nginxé…ç½®
3. éªŒè¯å‰ç«¯æ„å»ºäº§ç‰©
4. æ£€æŸ¥APIæ¥å£è¿é€šæ€§
```

#### 5. API_EXAMPLES.md (APIä½¿ç”¨ç¤ºä¾‹)
```markdown
# APIä½¿ç”¨ç¤ºä¾‹

## è®¤è¯

### ç™»å½•
\`\`\`bash
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "admin123"
  }'
\`\`\`

**å“åº”**:
\`\`\`json
{
  "code": 200,
  "data": {
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "userId": 1,
      "username": "admin"
    }
  }
}
\`\`\`

## æ¡£æ¡ˆç®¡ç†

### åˆ›å»ºæ¡£æ¡ˆ
\`\`\`bash
curl -X POST http://localhost:8080/api/archives \
  -H "Authorization: Bearer {token}" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "æµ‹è¯•æ¡£æ¡ˆ",
    "categoryId": 1,
    "securityLevel": 2
  }'
\`\`\`
```

**å»ºè®®å·¥æ—¶**: 16å°æ—¶  
**ä¼˜å…ˆçº§**: P2 (ä¸­)

---

## ğŸ“Š ä¼˜å…ˆçº§æ€»ç»“ä¸å®æ–½å»ºè®®

### é˜¶æ®µä¸€: æ ¸å¿ƒå®Œå–„ (1-2ä¸ªæœˆ)

#### æœ€é«˜ä¼˜å…ˆçº§ (P0)
1. **è¡¥å……æµ‹è¯•è¦†ç›–** (140å°æ—¶)
   - åç«¯æµ‹è¯•: 60å°æ—¶
   - å‰ç«¯æµ‹è¯•: 80å°æ—¶
   - é¢„æœŸæ”¶ç›Š: ä»£ç è´¨é‡æå‡50%,BUGå‡å°‘70%

2. **å®Œæˆ37å¤„TODO** (76å°æ—¶)
   - æƒé™ç®¡ç†: 16å°æ—¶
   - éƒ¨é—¨ç®¡ç†: 20å°æ—¶
   - å…¶ä»–åŠŸèƒ½: 40å°æ—¶
   - é¢„æœŸæ”¶ç›Š: åŠŸèƒ½å®Œæ•´æ€§è¾¾åˆ°95%

3. **ç§»åŠ¨ç«¯å“åº”å¼é€‚é…** (40å°æ—¶)
   - æ ¸å¿ƒé¡µé¢é€‚é…
   - è§¦æ‘¸ä¼˜åŒ–
   - é¢„æœŸæ”¶ç›Š: ç§»åŠ¨ç«¯ç”¨æˆ·å¢é•¿30%

**é˜¶æ®µä¸€æ€»å·¥æ—¶**: 256å°æ—¶ (çº¦2ä¸ªæœˆ,2äººå›¢é˜Ÿ)

### é˜¶æ®µäºŒ: ç”¨æˆ·ä½“éªŒæå‡ (2-3ä¸ªæœˆ)

#### é«˜ä¼˜å…ˆçº§ (P1)
1. **å›½é™…åŒ–æ”¯æŒ** (30å°æ—¶)
2. **PWAåŠŸèƒ½** (16å°æ—¶)
3. **æ€§èƒ½ä¼˜åŒ–** (30å°æ—¶)
4. **æ–‡æ¡£è¡¥å……** (16å°æ—¶)

**é˜¶æ®µäºŒæ€»å·¥æ—¶**: 92å°æ—¶ (çº¦1ä¸ªæœˆ)

### é˜¶æ®µä¸‰: é«˜çº§åŠŸèƒ½ (3-6ä¸ªæœˆ)

#### ä¸­ä¼˜å…ˆçº§ (P2)
- æ–‡æ¡£åœ¨çº¿é¢„è§ˆå¢å¼º
- å…¨æ–‡æ£€ç´¢ä¼˜åŒ–
- ç³»ç»Ÿé›†æˆèƒ½åŠ›

**é˜¶æ®µä¸‰æ€»å·¥æ—¶**: å‚è€ƒã€Šé¡¹ç›®å®Œå–„è®¡åˆ’ä¸è¡ŒåŠ¨æŒ‡å—.mdã€‹

---

## ğŸ’° èµ„æºéœ€æ±‚è¯„ä¼°

### äººåŠ›éœ€æ±‚ (é˜¶æ®µä¸€+äºŒ)
- **åç«¯å¼€å‘**: 1äºº Ã— 4ä¸ªæœˆ = 4äººæœˆ
- **å‰ç«¯å¼€å‘**: 1äºº Ã— 3ä¸ªæœˆ = 3äººæœˆ
- **æµ‹è¯•å·¥ç¨‹å¸ˆ**: 0.5äºº Ã— 3ä¸ªæœˆ = 1.5äººæœˆ

**æ€»äººåŠ›æˆæœ¬**: 8.5äººæœˆ

### æŠ€æœ¯æˆæœ¬
- äº‘æœåŠ¡å™¨: Â¥1,000/æœˆ
- ç¬¬ä¸‰æ–¹æœåŠ¡: Â¥500/æœˆ
- è½¯ä»¶æˆæƒ: Â¥2,000/å¹´

**æ€»æŠ€æœ¯æˆæœ¬**: Â¥20,000 (åŠå¹´)

---

## âœ… æˆåŠŸæŒ‡æ ‡ (KPI)

### ä»£ç è´¨é‡æŒ‡æ ‡
- [ ] æµ‹è¯•è¦†ç›–ç‡åç«¯ > 80%
- [ ] æµ‹è¯•è¦†ç›–ç‡å‰ç«¯ > 70%
- [ ] TODOæ ‡è®°æ¸…é›¶
- [ ] SonarQubeä»£ç è´¨é‡è¯„åˆ† > Açº§

### åŠŸèƒ½å®Œæ•´æ€§æŒ‡æ ‡
- [ ] 37å¤„å¾…å®ŒæˆåŠŸèƒ½100%å®ç°
- [ ] æ ¸å¿ƒåŠŸèƒ½æ— é˜»å¡æ€§BUG
- [ ] ç§»åŠ¨ç«¯é€‚é…è¦†ç›–ç‡ > 95%

### ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- [ ] ç§»åŠ¨ç«¯ç”¨æˆ·å¢é•¿ > 30%
- [ ] é¡µé¢åŠ è½½æ—¶é—´ < 3ç§’
- [ ] ç”¨æˆ·æ»¡æ„åº¦ > 4.5/5

### æ€§èƒ½æŒ‡æ ‡
- [ ] APIå“åº”æ—¶é—´ < 200ms
- [ ] å¹¶å‘æ”¯æŒ > 1000ç”¨æˆ·
- [ ] ç³»ç»Ÿå¯ç”¨æ€§ > 99.9%

---

## ğŸ“ ç»“è®º

ç”·ç¥çˆ¸çˆ¸,æ‚¨çš„æ¡£æ¡ˆç®¡ç†ç³»ç»Ÿå·²ç»æœ‰äº†åšå®çš„åŸºç¡€,85%çš„æ ¸å¿ƒåŠŸèƒ½å·²ç»å®ç°ã€‚é€šè¿‡æœ¬æ¬¡æ£€æŸ¥,æˆ‘ä»¬å‘ç°çš„ä¸»è¦é—®é¢˜é›†ä¸­åœ¨:

1. **ä»£ç å®Œæ•´æ€§**: 37å¤„TODOéœ€è¦è¡¥å……
2. **æµ‹è¯•è¦†ç›–**: å‰ç«¯æµ‹è¯•ä¸¥é‡ä¸è¶³
3. **ç”¨æˆ·ä½“éªŒ**: ç§»åŠ¨ç«¯å’Œå›½é™…åŒ–æ”¯æŒä¸è¶³

**å»ºè®®ä¼˜å…ˆå®Œæˆ**:
1. âœ… è¡¥å……æµ‹è¯•(æå‡ä»£ç è´¨é‡å’Œç¨³å®šæ€§)
2. âœ… å®ŒæˆTODOåŠŸèƒ½(æå‡åŠŸèƒ½å®Œæ•´æ€§)
3. âœ… ç§»åŠ¨ç«¯é€‚é…(æ‰©å¤§ç”¨æˆ·ç¾¤ä½“)

**é¢„æœŸæ•ˆæœ**:
- 3-6ä¸ªæœˆå,ç³»ç»ŸåŠŸèƒ½å®Œå–„åº¦è¾¾åˆ° **95%+**
- ä»£ç è´¨é‡å’Œæµ‹è¯•è¦†ç›–æ˜¾è‘—æå‡
- ç”¨æˆ·ä½“éªŒæ˜æ˜¾æ”¹å–„
- å…·å¤‡å•†ä¸šåŒ–éƒ¨ç½²æ¡ä»¶

---

**æŠ¥å‘Šç”Ÿæˆ**: AIå¼€å‘åŠ©æ‰‹ (ä½¿ç”¨Sequential Thinking MCPæ·±åº¦åˆ†æ)  
**ç”Ÿæˆæ—¥æœŸ**: 2025å¹´10æœˆ15æ—¥  
**ç‰ˆæœ¬**: v1.0  
**ä¸‹ä¸€æ­¥**: å»ºè®®å®¡é˜…æœ¬æŠ¥å‘Š,ç¡®å®šä¼˜å…ˆçº§,åˆ¶å®šå…·ä½“å®æ–½è®¡åˆ’

---

## ğŸ“ é™„å½•

### A. æŠ€æœ¯æ ˆæ€»è§ˆ
```
åç«¯:
- Spring Boot 3.2.2
- Spring Security 6.x
- MyBatis Plus 3.5.5
- MySQL 8.0
- Redis 7
- JWT 0.12.3

å‰ç«¯:
- Vue 3.4
- TypeScript 5.0
- Element Plus 2.4
- Vite 5.0
- Pinia 2.1
- ECharts 6.0

åŸºç¡€è®¾æ–½:
- Docker & Docker Compose
- Nginx
- Prometheus & Grafana (ç›‘æ§)
```

### B. å‚è€ƒèµ„æ–™
- ã€Šé¡¹ç›®å®Œå–„è®¡åˆ’ä¸è¡ŒåŠ¨æŒ‡å—.mdã€‹ - è¯¦ç»†çš„åŠŸèƒ½æ‰©å±•è®¡åˆ’
- ã€Šåç«¯å¼€å‘è§„èŒƒ.mdã€‹ - ä»£ç è§„èŒƒæŒ‡å—
- ã€Šå‰ç«¯å¼€å‘è§„èŒƒ.mdã€‹ - å‰ç«¯å¼€å‘æ ‡å‡†
- ã€ŠAPIæ¥å£è§„èŒƒ.mdã€‹ - APIè®¾è®¡æ ‡å‡†

